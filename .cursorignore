# Cursor IDE Rules

# Ignore Patterns
node_modules/
dist/
build/
coverage/
*.log
.env
.DS_Store

# TypeScript Configuration
*.{ts,tsx}:
  - strict: true
  - noImplicitAny: true
  - strictNullChecks: true

# TypeScript Module Configuration
tsconfig.json:
  compilerOptions:
    moduleResolution: "node16"  # Required for modern module features
    rules:
      - "Always use node16 for moduleResolution in modern projects"
      - "Required for customConditions and package exports"
      - "Update before adding new dependencies"
    checklist:
      - "Verify moduleResolution is set to node16"
      - "Test path aliases after configuration changes"
      - "Review compiler options when upgrading TypeScript"

# ESM Module System Rules
package.json:
  type: "module"  # Project uses ESM modules
  rules:
    - "All relative imports MUST include .js extension"
    - "Never use .ts or .tsx extensions in import statements"
    - "Use import type for type-only imports"
    - "Ensure both TypeScript and Metro have matching alias configurations"

# Import/Export Rules
*.{ts,tsx,js,jsx}:
  imports:
    relative-imports:
      - "Always use .js extension for relative imports"
      - "Example: import { Component } from './Component.js'"
      - "Never use: import { Component } from './Component'"
    type-imports:
      - "Use import type for type-only imports"
      - "Example: import type { ThemePreset } from '@/types/theme'"
      - "Never mix value and type imports in the same statement"
    path-aliases:
      - "Use @/ prefix for src directory imports"
      - "Configured aliases: @components, @hooks, @types, @services, @utils"
      - "Ensure both TypeScript and Metro have matching configurations"

# Component Naming Rules
*.{ts,tsx}:
  naming:
    avoid-collisions:
      - "Never use same name for both type and component"
      - "If collision occurs, rename component (e.g., TodoStats type → TodoStatsComponent)"
      - "Use descriptive suffixes for components when needed"
    react-native-paper:
      - "Always use aliases for React Native Paper components"
      - "Example: import { Button as PaperButton } from 'react-native-paper'"
      - "Use custom components with different names"

# AsyncStorage Usage Rules
*.{ts,tsx}:
  async-storage:
    type-safety:
      - "Use consistent typing pattern: (AsyncStorage as any).getItem(key)"
      - "Or create proper type definitions with interface"
      - "Always handle errors with try-catch"
    patterns:
      - "Use consistent error handling patterns"
      - "Provide meaningful error messages"
      - "Test AsyncStorage usage patterns"

# Theme System Rules
*.{ts,tsx}:
  theme:
    typography:
      - "All typography objects MUST include fontWeight property"
      - "Use consistent font weights: '400' for regular, '500' for medium"
      - "Never duplicate properties in theme objects"
    type-definitions:
      - "Extend ThemeTypography interface to include fontWeight: string"
      - "Ensure all theme objects match interface requirements"

# Error Prevention Checklist
*.{ts,tsx,js,jsx}:
  before-adding-files:
    - "Check for existing type/component name conflicts"
    - "Ensure proper import/export structure"
    - "Use correct file extensions (.js for imports)"
    - "Configure path aliases if needed"
  before-modifying-files:
    - "Verify import paths are correct"
    - "Check for type compatibility"
    - "Ensure no naming conflicts"
    - "Test AsyncStorage usage patterns"
  common-pitfalls:
    - "Don't mix CommonJS and ESM syntax"
    - "Don't forget .js extensions in relative imports"
    - "Don't use same names for types and components"
    - "Don't skip fontWeight in typography objects"
    - "Don't use direct AsyncStorage without type assertions"

# Development Workflow
*.{ts,tsx,js,jsx}:
  before-committing:
    - "Run TypeScript compiler check: npx tsc --noEmit"
    - "Verify all imports resolve correctly"
    - "Check for any naming conflicts"
    - "Ensure theme objects have all required properties"
  when-adding-features:
    - "Create proper type definitions first"
    - "Use consistent naming conventions"
    - "Follow established import/export patterns"
    - "Test with existing codebase"

# Theme System Configuration
*.{ts,tsx}:
  theme:
    rules:
      - "Always use useTheme hook for accessing theme values"
      - "Implement smooth transitions for theme changes"
      - "Support responsive spacing based on screen size"
      - "Use dynamic font scaling"
      - "Optimize theme calculations with memoization"
    animation:
      - "Use Animated API for theme transitions"
      - "Implement fade transitions for color changes"
      - "Add spring animations for interactive elements"
    responsive:
      - "Use relative units for spacing"
      - "Implement breakpoints for different screen sizes"
      - "Support landscape and portrait modes"
    fonts:
      - "Define consistent font scale"
      - "Support dynamic type settings"
      - "Implement custom font families"
    debug:
      - "Add theme inspector component"
      - "Log theme changes in development"
      - "Provide theme preview functionality"

# Import Order Rules
*.{ts,tsx,js,jsx}:
  import-order:
    groups:
      - ["react", "react-*"]
      - ["^@/components/"]
      - ["^@/hooks/"]
      - ["^@/utils/"]
      - ["^@/types/"]
      - ["^./styles"]

# Naming Conventions
*.{ts,tsx}:
  naming:
    components: "^[A-Z][a-zA-Z0-9]*$"
    hooks: "^use[A-Z][a-zA-Z0-9]*$"
    utils: "^[a-z][a-zA-Z0-9]*$"
    types: "^[A-Z][a-zA-Z0-9]*$"

# Component Structure
*.tsx:
  structure:
    order:
      - imports
      - interfaces/types
      - component
      - styles

# Testing Files
*.test.{ts,tsx}:
  pattern: "^describe\\('.*', () => {.*})$"
  required-imports:
    - "@testing-library/react"
    - "@testing-library/user-event"

# Git Commit Message Format
commit-message:
  pattern: "^(feat|fix|docs|style|refactor|test|chore)(\\(\\w+\\))?: .+"
  examples:
    - "feat(todo): add drag and drop functionality"
    - "fix(calendar): resolve sync issue"
    - "docs: update README"

# Branch Naming
branch-name:
  patterns:
    feature: "^feature/[a-z0-9-]+$"
    fix: "^fix/[a-z0-9-]+$"
    hotfix: "^hotfix/[a-z0-9-]+$"
    release: "^release/v\\d+\\.\\d+\\.\\d+$"

# Code Style
*.{ts,tsx,js,jsx}:
  quotes: double
  semi: true
  trailingComma: all
  tabWidth: 2
  printWidth: 80
  
# Comments Language
comments:
  language: ko-KR
  examples:
    - "# 공통 컴포넌트"
    - "# 캘린더 컴포넌트"
    - "# 할일 컴포넌트"
    - "# 가계부 컴포넌트"